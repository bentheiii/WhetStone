namespace WhetStone.NumbersMagic
{
    public static class factorial
    {
        public static ulong Factorial(this int x, int iteration = 1)
        {
            ulong[,] val =
            {
                {
                    1, 1, 2, 6, 24, 120, 720, 5040, 40320, 362880, 3628800, 39916800, 479001600, 6227020800, 87178291200,
                    1307674368000, 20922789888000, 355687428096000, 6402373705728000, 121645100408832000,
                    2432902008176640000, 14197454024290336768, 17196083355034583040, 8128291617894825984,
                    10611558092380307456, 7034535277573963776, 16877220553537093632, 12963097176472289280,
                    12478583540742619136, 11390785281054474240, 9682165104862298112, 4999213071378415616,
                    12400865694432886784, 3400198294675128320, 4926277576697053184, 6399018521010896896,
                    9003737871877668864, 1096907932701818880, 4789013295250014208, 2304077777655037952,
                    18376134811363311616, 15551764317513711616, 7538058755741581312, 10541877243825618944,
                    2673996885588443136, 9649395409222631424, 1150331055211806720, 17172071447535812608,
                    12602690238498734080, 8789267254022766592, 15188249005818642432, 18284192274659147776,
                    9994050523088551936, 13175843659825807360, 10519282829630636032, 6711489344688881664,
                    6908521828386340864, 6404118670120845312, 2504001392817995776, 162129586585337856
                },
                {
                    1, 1, 2, 3, 8, 15, 48, 105, 384, 945, 3840, 10395, 46080, 135135, 645120, 2027025, 10321920,
                    34459425, 185794560, 654729075, 3715891200, 13749310575, 81749606400, 316234143225, 1961990553600,
                    7905853580625, 51011754393600, 213458046676875, 1428329123020800, 6190283353629375,
                    42849873690624000, 191898783962510625, 1371195958099968000, 6332659870762850625, 9727174427979808768,
                    282166592185152483, 18136886080501186560, 10440163910850641871, 6672140331791679488,
                    1338022901564897417, 8631196239733456896, 17965450816741690865, 12022104668323708928,
                    16197878097801090939, 12463771342375747584, 9481495526376579231, 1484415464288288768,
                    2908431970669985073, 15911710064709206016, 13385958046862407265, 2375508065949581312,
                    154329662729360723, 12845954987120918528, 8179472124656118319, 11152038577276190720,
                    7149109087057268761, 15771605895051476992, 1670848340654183825, 10862682301217636352,
                    6346331730049087595
                },
                {
                    1, 1, 2, 3, 4, 10, 18, 28, 80, 162, 280, 880, 1944, 3640, 12320, 29160, 58240, 209440, 524880, 1106560,
                    4188800, 11022480, 24344320, 96342400, 264539520, 608608000, 2504902400, 7142567040, 17041024000,
                    72642169600, 214277011200, 528271744000, 2324549427200, 7071141369600, 17961239296000,
                    81359229952000, 254561089305600, 664565853952000, 3091650738176000, 9927882482918400,
                    26582634158080000, 126757680265216000, 416971064282572800, 1143053268797440000, 5577337931669504000,
                    316953819006224384, 15686962217263136768, 3880465756532965376, 15213783312298770432,
                    12344641623802085376, 9555847089552752640, 1139697831436124160, 14732065931583684608,
                    8397805756137996288, 6203450676422049792, 17053631067591933952, 9108520500989001728,
                    3108551155575357440, 11433166013725933568, 2447131420774105088
                },
                {
                    1, 1, 2, 3, 4, 5, 12, 21, 32, 45, 120, 231, 384, 585, 1680, 3465, 6144, 9945, 30240, 65835, 122880,
                    208845, 665280, 1514205, 2949120, 5221125, 17297280, 40883535, 82575360, 151412625, 518918400,
                    1267389585, 2642411520, 4996616625, 17643225600, 44358635475, 95126814720, 184874815125,
                    670442572800, 1729986783525, 3805072588800, 7579867420125, 28158588057600, 74389431691575,
                    167423193907200, 341094033905625, 1295295050649600, 3496303289504025, 8036313307545600,
                    16713607661375625, 64764752532480000, 178311467764705275, 417888291992371200, 885821206052908125,
                    3497296636753920000, 9807130727058790125, 4955000277863235584, 13598320597596659893,
                    18375764194631843840, 6771646611472517279
                },
                {
                    1, 1, 2, 3, 4, 5, 6, 14, 24, 36, 50, 66, 168, 312, 504, 750, 1056, 2856, 5616, 9576, 15000, 22176,
                    62832, 129168, 229824, 375000, 576576, 1696464, 3616704, 6664896, 11250000, 17873856, 54286848,
                    119351232, 226606464, 393750000, 643458816, 2008613376, 4535346816, 8837652096, 15750000000,
                    26381811456, 84361761792, 195019913088, 388856692224, 708750000000, 1213563326976, 3965002804224,
                    9360955828224, 19053977918976, 35437500000000, 61891729675776, 206180145819648, 496130658895872,
                    1028914807624704, 1949062500000000, 3465936861843456, 11752268311719936, 28775578215960576,
                    60705973649857536
                }
            };
            if (iteration - 1 < val.GetLength(0) && x < val.GetLength(1))
                return val[iteration - 1, x];
            ulong ret = 1;
            for (int i = x; i > 1; i -= iteration)
            {
                ret *= (ulong)i;
            }
            return ret;
        }
    }
}
